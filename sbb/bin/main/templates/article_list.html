<!DOCTYPE html>
<html layout:decorate="~{layout}">

<div layout:fragment="content" class="container my-3">

	<div class="row my-3">

		<div class="col-6">
			<!-- 질문 등록 버튼 -->
			<a th:href="@{/articles/create}" class="btn btn-primary">Article 등록하기</a>
		</div>

	</div>


	<table class="table">
		<thead class="table-dark">
			<tr>
				<th>No.</th>
				<th>Author</th>
				<th>Title</th>
				<th>Date</th>
			</tr>
		</thead>

		<tbody>
			<tr th:each="article, loop : ${articlePage}">

				<td th:text="${articlePage.getTotalElements - (articlePage.number * articlePage.size) - loop.index}">
				</td>

				<td th:text="${article.author}"></td>

				<td>
					<a th:href="@{|/articles/detail/${article.id}|}" th:text="${article.title}"></a>

					<span class="text-danger" th:if="${article.commentList.size() > 0}"
						th:text="'[' + ${article.commentList.size()} + ']'"></span>
				</td>

				<td th:text="${#temporals.format(article.createdDate, 'yyyy-MM-dd HH:mm')}"></td>
			</tr>
		</tbody>
	</table>

	<div th:if="${!articlePage.isEmpty()}">
	    <ul class="pagination justify-content-center">
			
	        <li class="page-item" th:classappend="${!articlePage.hasPrevious()} ? 'disabled'">
	            <a class="page-link" th:href="@{/articles(page=${articlePage.number - 1})}">
	                <span>이전</span>
	            </a>
	        </li>

	        <li th:each="page: ${#numbers.sequence(0, articlePage.totalPages - 1)}"
	            th:if="${page >= articlePage.number - 5 and page <= articlePage.number + 5}"
	            th:classappend="${page == articlePage.number} ? 'active'" class="page-item">
	            <a th:href="@{/articles(page=${page})}" th:text="${page}" class="page-link"></a>
	        </li>

	        <li class="page-item" th:classappend="${!articlePage.hasNext()} ? 'disabled'">
	            <a class="page-link" th:href="@{/articles(page=${articlePage.number + 1})}">
	                <span>다음</span>
	            </a>
	        </li>
	    </ul>
	</div>


</div>


</html>